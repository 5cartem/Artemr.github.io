<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>5 Lane Rhythm Game</title>

<style>
  body {
    background: #0f0f1a;
    color: white;
    font-family: Arial, sans-serif;
    text-align: center;
  }

  #controls {
    margin: 10px;
  }

  #game {
    position: relative;
    width: 500px;
    height: 600px;
    margin: auto;
    background: #111;
    border: 2px solid #444;
    display: flex;
  }

  .lane {
    flex: 1;
    border-left: 1px solid #333;
    position: relative;
  }

  .block {
    position: absolute;
    width: 100%;
    height: 40px;
    cursor: pointer;
  }

  #hitLine {
    position: absolute;
    bottom: 100px;
    width: 100%;
    height: 4px;
    background: red;
    pointer-events: none;
  }
</style>
</head>

<body>

<h1>5 Lane Rhythm Game</h1>

<div id="controls">
  Speed:
  <input type="range" id="speed" min="2" max="10" value="5">
  <span id="speedVal">5</span>
</div>

<div id="game">
  <div id="hitLine"></div>
</div>

<p>
  Score: <span id="score">0</span> |
  Misses: <span id="misses">0</span> / 5
</p>

<script>
  const game = document.getElementById("game");
  const scoreEl = document.getElementById("score");
  const missesEl = document.getElementById("misses");
  const speedSlider = document.getElementById("speed");
  const speedVal = document.getElementById("speedVal");

  const lanes = [];
  const colors = ["#ff4d4d", "#4dff4d", "#4dd2ff", "#ff4dff", "#ffd24d"];

  let speed = 5;
  let score = 0;
  let misses = 0;
  let gameOver = false;

  speedSlider.oninput = () => {
    speed = Number(speedSlider.value);
    speedVal.textContent = speed;
  };

  // Create 5 lanes
  for (let i = 0; i < 5; i++) {
    const lane = document.createElement("div");
    lane.className = "lane";
    game.appendChild(lane);
    lanes.push(lane);
  }

  function spawnBlock() {
    if (gameOver) return;

    const laneIndex = Math.floor(Math.random() * 5);
    const block = document.createElement("div");
    block.className = "block";
    block.style.background = colors[laneIndex];
    block.style.top = "-40px";

    lanes[laneIndex].appendChild(block);

    let y = -40;

    function fall() {
      if (gameOver) return;

      y += speed;
      block.style.top = y + "px";

      // Missed
      if (y > 560) {
        block.remove();
        misses++;
        missesEl.textContent = misses;
        if (misses >= 5) endGame();
        return;
      }

      requestAnimationFrame(fall);
    }

    block.onclick = () => {
      const hitZoneTop = 460;
      const hitZoneBottom = 540;

      if (y >= hitZoneTop && y <= hitZoneBottom) {
        score++;
        scoreEl.textContent = score;
      } else {
        misses++;
        missesEl.textContent = misses;
        if (misses >= 5) endGame();
      }
      block.remove();
    };

    requestAnimationFrame(fall);
  }

  function endGame() {
    gameOver = true;
    alert("Game Over!\nScore: " + score);
  }

  setInterval(spawnBlock, 800);
</script>

</body>
</html>
